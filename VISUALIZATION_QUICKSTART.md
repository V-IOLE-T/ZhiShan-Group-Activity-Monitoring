# 📊 可视化方案快速参考

## 🎯 推荐优先级

### ⭐⭐⭐ 必备图表（优先实现）

| 图表名称 | 图表类型 | 数据源 | 用途 |
|---------|---------|--------|------|
| **活跃度排行榜** | 横向条形图 | 用户活跃度表 | 快速识别最活跃的用户 Top 10 |
| **话题状态统计** | 数字卡片 + 饼图 | 话题汇总表 | 了解话题整体情况（活跃/沉默/冷却） |
| **热门话题列表** | 列表卡片 | 话题汇总表 | 展示最受关注的话题 Top 5-10 |
| **消息趋势图** | 折线图 | 消息归档表 | 了解群组活跃度变化趋势 |

### ⭐⭐ 进阶分析（有价值）

| 图表名称 | 图表类型 | 数据源 | 用途 |
|---------|---------|--------|------|
| **用户雷达图** | 雷达图 | 用户活跃度表 | 多维度评估单个用户表现 |
| **时间分布热力图** | 热力图 | 消息归档表 | 找出群组活跃时段 |
| **互动关系图** | 网络图/弦图 | 消息归档表 | 分析用户间互动关系 |
| **话题参与度散点图** | 散点图 | 话题汇总表 | 识别高/低参与度话题 |

### ⭐ 补充功能（锦上添花）

| 功能名称 | 类型 | 数据源 | 用途 |
|---------|------|--------|------|
| **词云图** | 词云 | 消息内容 | 可视化热门话题词汇 |
| **活跃度分布** | 直方图 | 用户活跃度表 | 了解用户活跃度分布情况 |
| **贡献类型堆叠图** | 堆叠柱状图 | 用户活跃度表 | 分析用户的贡献类型 |

---

## 📐 推荐布局方案

### 方案1：单页综合仪表盘（适合概览）

```
┌─────────────────────────────────────────────────────────┐
│                飞书群组数据分析仪表盘                    │
├──────────┬──────────┬──────────┬──────────────────────────┤
│ 📬总消息 │ 👥活跃用户│ 💬进行话题│      活跃度排行榜        │
│  15,200  │   850    │   125    │   (横向条形图)          │
│  ↑ 5.2%  │  ↑ 3.1%  │  ↑ 1.5%  │                         │
├──────────┴──────────┴──────────┤   Top 10 用户           │
│     每日消息趋势 (折线图)       │                         │
│                                 │   🥇 User_A  ████ 450   │
│     显示最近30天的消息数量      │   🥈 User_B  ███  420   │
│                                 │   🥉 User_C  ███  380   │
├─────────────────┬───────────────┤   ...                   │
│ 话题状态分布    │  热门话题     ├─────────────────────────┤
│  (饼图)         │  Top 5        │   话题状态统计卡片      │
│                 │  (列表)       │                         │
│  🟢 活跃 55%    │               │   🟢 活跃  🟡 沉默      │
│  🟡 沉默 30%    │  1. Q4计划... │   115(55%) 63(30%)     │
│  🔵 冷却 15%    │  2. 团建活动..│   🔵 冷却: 32(15%)     │
│                 │  ...          │                         │
└─────────────────┴───────────────┴─────────────────────────┘
```

**适用场景**: 
- 快速查看群组整体情况
- 定期汇报
- 大屏展示

---

### 方案2：多标签页仪表盘（适合深度分析）

#### 📑 Tab 1: 总览
- KPI 卡片（4个关键指标）
- 消息趋势图
- 话题状态分布

#### 👥 Tab 2: 用户分析  
- 活跃度排行榜
- 用户雷达图（选中用户）
- 互动关系网络图
- 贡献类型分析

#### 💬 Tab 3: 话题分析
- 热门话题列表
- 话题状态统计
- 话题参与度散点图
- 话题生命周期

#### 📖 Tab 4: 话题内容
- 话题列表（可筛选）
- 话题详情页
- 消息时间线

**适用场景**:
- 需要深入分析
- 不同角色关注不同维度
- 交互探索数据

---

## 🎨 核心指标卡片设计

### KPI 卡片组（4个）

```
┌──────────────────┐  ┌──────────────────┐
│ 📬 总消息数      │  │ 👥 活跃用户数    │
│                  │  │                  │
│    15,200        │  │      850         │
│    ↑ +5.2%       │  │      ↑ +3.1%     │
│   (较上周)       │  │     (较上周)     │
└──────────────────┘  └──────────────────┘

┌──────────────────┐  ┌──────────────────┐
│ 💬 进行中话题    │  │ ⏱️ 平均响应时间   │
│                  │  │                  │
│      125         │  │      3.5h        │
│      ↑ +1.5%     │  │      ↓ -0.2h     │
│     (较上周)     │  │     (较上周)     │
└──────────────────┘  └──────────────────┘
```

---

## 📋 话题内容页设计

### 核心元素

**1. 话题头部信息**
```
🏷️ Q4产品发布讨论会
👤 张三 (发起人)  📅 2026-01-10 14:30  ⏰ 最后回复: 2小时前
🟢 活跃
```

**2. 话题统计卡片**
```
💬 205回复  |  👥 12人参与  |  ⏱️ 平均响应2.3h  |  📎 3个附件
```

**3. 参与者列表**
```
👤 张三 (发起人, 18条)  👤 李四 (25条)  👤 王五 (12条)
👤 赵六 (10条)  👤 钱七 (8条)  👤 孙八 (6条)  ...
```

**4. 消息时间线**
```
┌─────────────────────────────────────────┐
│ 👤 张三  2026-01-10 14:30               │
│ ───────────────────────────────────────  │
│ 大家好，关于Q4的产品发布计划，这是初   │
│ 步方案，请大家提供意见 @所有人          │
│ 📎 Q4发布计划.pdf (2.5MB)              │
│                          [查看消息] →   │
├─────────────────────────────────────────┤
│ 👤 李四  2026-01-10 14:45               │
│ ───────────────────────────────────────  │
│ 收到，@张三，我已经打开查看了，关于发  │
│ 布时间有建议...                         │
│                          [查看消息] →   │
├─────────────────────────────────────────┤
│ ...更多消息...                          │
└─────────────────────────────────────────┘
```

---

## 🛠️ 飞书仪表盘配置指南

### 步骤1: 创建仪表盘
1. 打开多维表格
2. 点击"仪表盘"选项卡
3. 点击"创建仪表盘"

### 步骤2: 添加图表

#### 图表1: 活跃度排行榜（条形图）
- **数据源**: 用户活跃度表
- **类型**: 横向条形图
- **维度**: 用户名称
- **指标**: 活跃度分数
- **排序**: 活跃度分数降序
- **限制**: 显示前10条

#### 图表2: 话题状态分布（饼图）
- **数据源**: 话题汇总表
- **类型**: 饼图
- **维度**: 话题状态
- **指标**: 计数
- **颜色**: 活跃=绿色, 沉默=黄色, 冷却=蓝色

#### 图表3: 消息趋势（折线图）
- **数据源**: 消息归档表
- **类型**: 折线图
- **X轴**: 发送时间（按日期分组）
- **Y轴**: 消息数量（计数）
- **时间范围**: 最近30天

#### 图表4: KPI卡片（数值）
- **数据源**: 对应的表
- **类型**: 数值卡片
- **指标**: 
  - 总消息数 = COUNT(消息ID)
  - 活跃用户 = UNIQUE_COUNT(用户ID)
  - 进行话题 = COUNT(话题ID where 话题状态='活跃')

### 步骤3: 布局调整
- 拖拽调整图表位置
- 调整图表大小
- 设置合适的间距

### 步骤4: 添加筛选器
- 添加时间范围筛选器
- 添加话题状态筛选器
- 添加用户筛选器

---

## 💡 最佳实践

### 1. 颜色使用
✅ **推荐**:
- 使用一致的配色方案
- 活跃=绿色, 沉默=黄色, 冷却=蓝色
- 重要数据用醒目颜色

❌ **避免**:
- 过多颜色造成视觉混乱
- 颜色含义不一致

### 2. 数据展示
✅ **推荐**:
- 显示变化趋势（↑ +5.2%）
- 适当的数据精度（小数点1-2位）
- 使用千分位分隔符（15,200）

❌ **避免**:
- 过多的小数位
- 没有单位或说明
- 数据过于密集

### 3. 交互设计
✅ **推荐**:
- 提供筛选器
- 图表可点击查看详情
- 添加工具提示（tooltip）

❌ **避免**:
- 只有静态展示
- 没有上下文说明

---

## 📊 示例SQL查询（用于高级分析）

如果需要导出数据进行自定义分析，可以使用这些查询逻辑：

### 查询1: 每日消息趋势
```sql
SELECT 
    DATE(发送时间) as 日期,
    COUNT(*) as 消息数量
FROM 消息归档表
WHERE 发送时间 >= DATE_SUB(NOW(), INTERVAL 30 DAY)
GROUP BY 日期
ORDER BY 日期
```

### 查询2: 用户互动矩阵
```sql
SELECT 
    发送者姓名 as 发送者,
    COUNT(DISTINCT @的人) as 互动人数,
    COUNT(*) as 消息数
FROM 消息归档表
WHERE @的人 IS NOT NULL
GROUP BY 发送者姓名
ORDER BY 互动人数 DESC
```

### 查询3: 话题活跃度分析
```sql
SELECT 
    话题ID,
    话题标题,
    回复数,
    参与人数,
    DATEDIFF(NOW(), 最后回复时间) as 距今天数,
    话题状态
FROM 话题汇总表
ORDER BY 回复数 DESC
LIMIT 10
```

---

## 🎯 实施建议

### 第一周: MVP（最小可行产品）
- [ ] 创建飞书仪表盘
- [ ] 添加4个KPI卡片
- [ ] 添加活跃度排行榜
- [ ] 添加话题状态分布

### 第二周: 核心功能
- [ ] 添加消息趋势图
- [ ] 添加热门话题列表
- [ ] 配置筛选器
- [ ] 调整布局和样式

### 第三周: 话题内容页
- [ ] 设计话题详情页结构
- [ ] 实现消息时间线
- [ ] 添加链接跳转
- [ ] 测试用户体验

### 第四周: 优化迭代
- [ ] 收集用户反馈
- [ ] 添加更多图表
- [ ] 优化性能
- [ ] 完善文档

---

## 🔗 相关资源

- **主文档**: `VISUALIZATION_GUIDE.md` - 完整的可视化方案指南
- **设计原型**: 
  - `dashboard_overview_mockup.png` - 仪表盘总览设计
  - `topic_detail_page.png` - 话题详情页设计
- **其他文档**:
  - `TOPIC_STATUS.md` - 话题状态说明
  - `LINK_FEATURE.md` - 链接功能说明

---

## 更新时间
2026-01-15
